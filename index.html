<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Learning</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="wordContainer" class="container">
        <h2>Vertaal het volgende woord:</h2>
        <div class="dropdown-container">
            <label for="wordLists">Kies hier je woordenlijst:</label>
            <select id="wordLists" class="dropdown-button" onchange="loadWordList()">
                <option value="English_Test.json">Test lijst Engels</option>
                <option value="French_Test.json">Test Lijst Frans</option>
                <option value="samual_maart_2024.json">Lijst Samuel</option>
                <!-- Add more options for different word lists -->
            </select>
        </div>
        <div class="dropdown-container">
            <input type="radio" id="translationOption1" name="translationOption" value="option1" checked>
            <label for="translationOption1" id="translationLabel1"></label>
        </div>
        <div class="dropdown-container">
            <input type="radio" id="translationOption2" name="translationOption" value="option2">
            <label for="translationOption2" id="translationLabel2"></label>
        </div>
        <p id="wordToTranslate"></p>
        <input type="text" id="translationInput" class="dropdown-button" placeholder="Enter translation">
        <button id="submitBtn" class="button dropdown-button" onclick="checkTranslation()">Dit is het!</button>
        <p id="resultMessage"></p>
        <button id="nextBtn" class="button dropdown-button" onclick="nextWord()">Volgend woord</button>
        <p id="counter" class="counter">0 / 0</p>
    </div>

    <script>
        let word;
        let translationOptions = []; // Array to store translation options
        let translationDirection; // Translation direction based on user selection
        let isAnswerSubmitted = false; // Flag to track if an answer is submitted
        let correctAnswers = 0; // Counter for correct answers on the first attempt
        let totalAttempts = 0; // Total number of attempts

        // Function to load word list based on selection
        function loadWordList() {
            const selectedList = document.getElementById("wordLists").value;
            fetch(selectedList)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    if (data && data.length > 0) {
                        word = getRandomWord(data);
                        translationOptions = getTranslationOptions(word);
                        displayTranslationOptions();
                        displayWordForTranslation();
                    } else {
                        console.error('No data found in selected word list');
                    }
                })
                .catch(error => {
                    console.error('Error fetching word data:', error);
                });
        }

        // Function to get a random word based on translation direction
        function getRandomWord(data) {
            const randomIndex = Math.floor(Math.random() * data.length);
            return data[randomIndex];
        }

        // Function to get translation options from the word object
        function getTranslationOptions(word) {
            return Object.keys(word).filter(key => key !== 'id');
        }

        // Function to display translation options
        function displayTranslationOptions() {
            translationOptions.forEach((option, index) => {
                const radioBtn = document.getElementById(`translationOption${index + 1}`);
                const label = document.getElementById(`translationLabel${index + 1}`);
                radioBtn.value = option;
                label.textContent = option;
            });
        }

        // Function to display a word for translation
        function displayWordForTranslation() {
            if (word) {
                document.getElementById("wordToTranslate").textContent = word[translationOptions[0]];
            } else {
                console.error("Word is undefined or null");
            }
        }

        // Function to check translation
        function checkTranslation() {
            const userInput = document.getElementById("translationInput").value.trim().toLowerCase();
            if (word) {
                const correctTranslation = word[translationOptions[1]].toLowerCase();

                if (userInput === correctTranslation) {
                    if (!isAnswerSubmitted) {
                        correctAnswers++;
                    }
                    isAnswerSubmitted = true;
                }
                totalAttempts++;
                updateCounter();
            } else {
                console.error("Word is undefined or null");
            }
        }

        // Function to update the counter display
        function updateCounter() {
            document.getElementById("counter").textContent = `${correctAnswers} / ${totalAttempts}`;
        }

        // Function to clear result message and input field
        function clearFeedback() {
            document.getElementById("resultMessage").textContent = "";
            document.getElementById("translationInput").value = "";
            isAnswerSubmitted = false;
        }

        // Function to load next word
        function nextWord() {
            clearFeedback();
            const selectedList = document.getElementById("wordLists").value;
            fetch(selectedList)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    if (data && data.length > 0) {
                        word = getRandomWord(data);
                        translationOptions = getTranslationOptions(word);
                        displayTranslationOptions();
                        displayWordForTranslation();
                    } else {
                        console.error('No data found in selected word list');
                    }
                })
                .catch(error => {
                    console.error('Error fetching word data:', error);
                });
        }

        // Event listener for translation direction radio buttons
        document.querySelectorAll('input[name="translationOption"]').forEach(radio => {
            radio.addEventListener('change', updateTranslationDirection);
        });

        // Function to update translation direction based on radio button selection
        function updateTranslationDirection(event) {
            translationDirection = event.target.value;
            displayWordForTranslation();
        }

        // Call loadWordList initially
        loadWordList();
    </script>
</body>
</html>
